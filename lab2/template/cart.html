{% extends "base.html" %}
{% block title %}Cart | GreatKart{% endblock %}
{% load static %}

{% block content %}
<section class="section-content padding-y bg">
<div class="container">

{% if cart_items %}
<div class="row">
	<aside class="col-lg-9">
		<div class="card">
			<table class="table table-borderless table-shopping-cart">
				<thead class="text-muted">
				<tr class="small text-uppercase">
				  <th scope="col">Product</th>
				  <th scope="col" width="120">Quantity</th>
				  <th scope="col" width="120">Price</th>
				  <th scope="col" class="text-right" width="200"> </th>
				</tr>
				</thead>

				<tbody>
				{% for item in cart_items %}
				<tr>
					<td>
						<figure class="itemside align-items-center">
							<div class="aside">
								<img src="{{ item.product.images.url }}" class="img-sm" alt="{{ item.product.product_name }}">
							</div>
							<figcaption class="info">
								<a href="{% url 'product_detail' item.product.slug %}" class="title text-dark">
									{{ item.product.product_name }}
								</a>
								<p class="text-muted small">
									Category: {{ item.product.category.category_name }}
								</p>
							</figcaption>
						</figure>
					</td>

					<td>
						<div class="col">
							<div class="input-group input-spinner">
								<div class="input-group-prepend">
									<a href="{% url 'remove_cart' item.product.id %}" class="btn btn-light"> 
										<i class="fa fa-minus"></i> 
									</a>
								</div>
								<input type="text" class="form-control text-center" value="{{ item.quantity }}" readonly>
								<div class="input-group-append">
									<a href="{% url 'add_cart' item.product.id %}" class="btn btn-light"> 
										<i class="fa fa-plus"></i> 
									</a>
								</div>
							</div>
						</div>
					</td>

					<td>
						<div class="price-wrap">
							<var class="price">{{ item.sub_total }}₮</var>
							<small class="text-muted"> {{ item.product.price }}₮ each </small>
						</div>
					</td>

					<td class="text-right">
						<a href="{% url 'remove_cart_item' item.product.id %}" class="btn btn-danger btn-sm">Remove</a>
					</td>
				</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
	</aside>

	<aside class="col-lg-3">
		<div class="card">
			<div class="card-body">
				<dl class="dlist-align">
				  <dt>Total quantity:</dt>
				  <dd class="text-right">{{ quantity }}</dd>
				</dl>
				<dl class="dlist-align">
				  <dt>Total price:</dt>
				  <dd class="text-right">{{ total }}₮</dd>
				</dl>
				<hr>
				<p class="text-center mb-3">
					<img src="{% static 'images/misc/payments.png' %}" height="26" alt="payment methods">
				</p>
				<a href="{% url 'place_order' %}" class="btn btn-primary btn-block">Checkout</a>
				<a href="{% url 'store' %}" class="btn btn-light btn-block">Continue Shopping</a>
			</div>
		</div>
	</aside>
</div>

{% else %}
<div class="text-center py-5">
	<img src="{% static 'images/misc/emptycart.svg' %}" alt="Empty cart" width="250" class="mb-3">
	<h4>Таны сагс хоосон байна</h4>
	<p>Дэлгүүрээс бараа сонгон сагсандаа нэмээрэй.</p>
	<a href="{% url 'store' %}" class="btn btn-primary mt-3">Дэлгүүр рүү буцах</a>
</div>
{% endif %}

</div>
</section>
{% endblock %}
